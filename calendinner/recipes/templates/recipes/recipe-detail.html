{% extends "common/base.html" %}

{% block content %}

<div id="detail">
  {% load static %}

  <h3>{{ recipe.title }}</h3>
  <p>{{ recipe.description }}</p>
  <p>Prep Time: {{ recipe.prep_time }}</p>
  <p>Cook Time: {{ recipe.cook_time }}</p>
  <p>Serving Size: {{ recipe.serving_size }}</p>
  <p>User: {{ recipe.user }}</p>
  <p>Tags: {% for tag in recipe.tags.all %}{{ tag.tag_name }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
  <p>Ingredients: 
    {% for i in ingredient %}
      <p> {{ i.ingredient_name }} </p>
    {% endfor %}
  </p>

  {% for recipestep in recipe.recipestep_set.all %}
    <p>{{ recipestep.step }}</p>
  {% endfor %}

  {% if recipe.image_filename != 'REMOVE THIS' %}
    <a href="#">
      <img src="{% static recipe.image_filename %}.jpg">
    </a>
  {% else %}
    <a href="#">
      <img src="https://placehold.co/500x500" height="100" width="100">
    </a>
  {% endif %}

  <form method="post" action="{% url 'favorites' %}">
    {% csrf_token %}
    <input type="hidden" name="recipe_id" value="{{ recipe.id }}">
    <button type="submit">Add to Favorites</button>
  </form>

  <form method="post" action="{% url 'upcoming-menu' %}">
    {% csrf_token %}
    <input type="hidden" name="recipe_id" value="{{ recipe.id }}">
    <button type="submit">Add to Upcoming Menu</button>
  </form>

</div>

{% endblock %}
